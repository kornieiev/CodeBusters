{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAIIC,EAAe,GACnB,SAASC,IACcC,OAAOC,WAG5BH,GAAe,EAAAI,EAAAC,mBAAoB,GACnC,IAAMC,EAAcC,SAASC,cAAc,6BAEf,IAAxBR,EAAaS,OACfH,EAAYI,UAAUC,IAAI,mBAE1BL,EAAYI,UAAUE,OAAO,kB,CAOC,SAAzBC,EAAmBC,GAC1B,IAAMC,EAAgBD,EAAdC,UACFC,EAAoBT,SAASC,cAAc,2BAC3CS,EAAWV,SAASW,cAAc,MACxCD,EAASP,UAAUC,IAAI,sBACH,oDAO4BQ,OAL1CL,EAAKM,WACN,yNAK8CD,OADHL,EAAKO,MAAM,8DAKVF,OAJEL,EAAKQ,UAAU,+IAMnBH,OAFEL,EAAKS,YAAY,yGAItDJ,OAFmCL,EAAKU,OAAO,mEAEjBL,YAAZL,EAAKW,MAAO,uDAhB1C,IAsBMC,EAAW,kFASuCP,OANnCL,EAAKM,WAAW,wRAQfD,OAFkCL,EAAKO,MAAM,8FASjDF,OAPIL,EAAKQ,UAAU,4OAUkBH,OAHrCL,EAAKS,YAAY,2IAMRJ,OAH4BL,EAAKU,OAAO,gJAQxCL,OALAJ,EAAU,GAAGY,IAAI,0OAUjBR,OALAJ,EAAU,GAAGY,IAAI,0OAKAR,OAAjBJ,EAAU,GAAGY,IAAI,kOAS5CV,EAASW,WAAaF,EACtBT,EAASY,iBACP,QACAC,EAAWC,KAAK,CACdC,KAAMf,EACNgB,GAAInB,EAAKoB,OAGblB,EAAkBmB,OAAOlB,E,UAqBZmB,I,OAAAA,EAAfC,EAAAvC,EAAA,CAAAuC,EAAAC,GAAAC,MAAA,SAAAC,I,IAGQC,EACGC,EACDC,E,kEAJkBpC,SAASC,cAAc,2BAC/BoB,UAAY,GACxBa,EAAM,GACHC,EAAI,E,YAAGA,EAAI1C,EAAaS,QAAM,C,iCACnB,EAAAmC,EAAAC,aAAY7C,EAAa0C,I,QAArCC,EAAGG,EAAAC,OAEPN,EAAIO,KAAKL,EAAIM,M,OAHwBP,I,uBAOzCQ,QAAQC,IAAIV,GAEZA,EAAIW,SAAQ,SAAAtC,GACVD,EAAmBC,E,iDAdYuC,MAAAC,KAAAC,U,CA4BnC,SAASzB,EAAW0B,IAEhBA,EAAMC,OAAO/C,UAAUgD,SAAS,eAChCF,EAAMC,OAAO/C,UAAUgD,SAAS,0BAEhC,EAAAtD,EAAAuD,mBAAkBL,KAAKrB,IACvBqB,KAAKtB,KAAKpB,UAGZX,G,CA3IFA,I,WAsGemC,EAAoBiB,MAAAC,KAAAC,U,CA0BnCK,E","sources":["src/components/shoplist.js"],"sourcesContent":["import { getBookById } from '../api';\nimport { deleteFromStorage, getStoredItems } from './localStorageApi';\n\n// Отримання даних з localStorage\nlet shoppingList = [];\nfunction init() {\n  const windowHeight = window.innerWidth;\n  const perPage = windowHeight >= 768 ? 3 : 4;\n\n  shoppingList = getStoredItems() || [];\n  const placeHolder = document.querySelector('.shopping-empty-container');\n\n  if (shoppingList.length !== 0) {\n    placeHolder.classList.add('visually-hidden');\n  } else {\n    placeHolder.classList.remove('visually-hidden');\n  }\n}\n\ninit();\n\n// Функція для створення карточки з даними\nfunction createShoppingCard(book) {\n  const { buy_links } = book;\n  const cardListContainer = document.querySelector('.shopping-list-cardlist');\n  const listItem = document.createElement('li');\n  listItem.classList.add('shopping-list-card');\n  const cardHTMLOld = `\n      <img class=\"shopping-list-cardlogo\" src=\"${\n        book.book_image\n      }\" alt=\"book-logo\" />\n      <div class=\"shopping-list-fullinfo\">\n        <div class=\"shopping-list-cardheader\">\n          <div class=\"cardheader-titlecontainer\">\n            <h3 class=\"shopping-list-cardtitle\">${book.title}</h3>\n            <h4 class=\"shopping-list-cardcategory\">${book.list_name}</h4>\n          </div>\n          <button class=\"deletecard\">Х</button>\n        </div>\n        <p class=\"shopping-list-carddescription\">${book.description}</p>\n        <div class=\"shopping-list-cardfooter\">\n          <h4 class=\"shopping-list-cardauthor\">${book.author}</h4>\n          <ul class=\"shopping-list-shops\">\n            ${generateShopLinks(book.shops)}\n          </ul>\n        </div>\n      </div>\n  `;\n\n  const cardHTML = `\n  <img\n                class=\"shopping-list-cardlogo\"\n                src=\"${book.book_image}\"\n                alt=\"book-logo\"\n              />\n              <div class=\"shopping-list-fullinfo\">\n                <div class=\"shopping-list-cardheaer\">\n                  <div class=\"cardheaer-tittlecontainer\">\n                    <h3 class=\"shopping-list-cardtitle\">${book.title}</h3>\n                    <h4 class=\"shopping-list-cardcategory\">\n                      ${book.list_name}\n                    </h4>\n                  </div>\n                  <button class=\"deletecard\">\n                  </button>\n                </div>\n                <p class=\"shopping-list-carddescription\">\n                  ${book.description}\n                </p>\n                <div class=\"shopping-list-cardfooter\">\n                  <h4 class=\"shopping-list-cardauthor\">${book.author}</h4>\n                  <ul class=\"shopping-list-shops\">\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[0].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon1\"></div>\n                  </a>\n                </li>\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[1].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon2\"></div>\n                  </a>\n                </li>\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[4].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon3\"></div>\n                  </a>\n                </li>\n                  </ul>\n                </div>\n              </div>\n  `;\n\n  listItem.innerHTML += cardHTML;\n  listItem.addEventListener(\n    'click',\n    deleteCard.bind({\n      card: listItem,\n      id: book._id,\n    })\n  );\n  cardListContainer.append(listItem);\n}\n\n// Функція для генерації посилань на магазини\nfunction generateShopLinks(shops) {\n  // return shops\n  //   .map(\n  //     shop => `\n  //   <li class=\"shopping-list-shopsitem\">\n  //     <a href=\"${shop.url}\" class=\"shopping-list-shopslink\">\n  //       <svg class=\"shopping-list-shopsicon\" width=\"16\" height=\"16\">\n  //         <use href=\"../images/sprite.svg#icon-burger\"></use>\n  //       </svg>\n  //     </a>\n  //   </li>\n  // `\n  //   )\n  //   .join('');\n}\n\n// Відображення карточок з даними з localStorage\nasync function displayShoppingCards() {\n  const cardListContainer = document.querySelector('.shopping-list-cardlist');\n  cardListContainer.innerHTML = '';\n  const arr = [];\n  for (let i = 0; i < shoppingList.length; i++) {\n    const res = await getBookById(shoppingList[i]);\n    if (res) {\n      arr.push(res.data);\n    }\n  }\n\n  console.log(arr);\n\n  arr.forEach(book => {\n    createShoppingCard(book);\n  });\n}\n\n// Оновлення даних в localStorage\nfunction updateLocalStorage() {\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n}\n\n// Приклад додавання книги до списку\n\n// updateLocalStorage();\ndisplayShoppingCards();\n\nfunction deleteCard(event) {\n  if (\n    event.target.classList.contains('deletecard') ||\n    event.target.classList.contains('shopping-list-icon')\n  ) {\n    deleteFromStorage(this.id);\n    this.card.remove();\n  }\n\n  init();\n}\n"],"names":["$bpxeT","parcelRequire","$9096930a9891cc20$var$shoppingList","$9096930a9891cc20$var$init","window","innerWidth","$fdsSQ","getStoredItems","placeHolder","document","querySelector","length","classList","add","remove","$9096930a9891cc20$var$createShoppingCard","book","buy_links","cardListContainer","listItem","createElement","concat","book_image","title","list_name","description","author","shops","cardHTML","url","innerHTML","addEventListener","$9096930a9891cc20$var$deleteCard","bind","card","id","_id","append","$9096930a9891cc20$var$_displayShoppingCards","$parcel$interopDefault","$2TvXO","mark","_callee","arr","i","res","$6LkHx","getBookById","_ctx","sent","push","data","console","log","forEach","apply","this","arguments","event","target","contains","deleteFromStorage","$9096930a9891cc20$var$displayShoppingCards"],"version":3,"file":"shoplist.26a47339.js.map"}