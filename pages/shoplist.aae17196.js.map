{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIe,IAAXC,EAAe,GACnB,SAASC,IACcC,OAAOC,WAG5BH,GAAe,EAAAI,EAAAC,mBAAoB,GACnC,MAAMC,EAAcC,SAASC,cAAc,6BAEf,IAAxBR,EAAaS,OACfH,EAAYI,UAAUC,IAAI,mBAE1BL,EAAYI,UAAUE,OAAO,kB,CAOC,SAAzBC,EAAmBC,GAC1B,MAAMC,UAAEA,GAAcD,EAChBE,EAAoBT,SAASC,cAAc,2BAC3CS,EAAWV,SAASW,cAAc,MACxCD,EAASP,UAAUC,IAAI,sBAGjBG,EAAKK,WAKqCL,EAAKM,MACFN,EAAKO,UAIPP,EAAKQ,YAEPR,EAAKS,OAEtBT,EAAKU,MAhBnC,MAsBMC,EAAW,kFAGIX,EAAKK,iSAM8BL,EAAKM,kGAEvCN,EAAKO,oPAOTP,EAAKQ,qJAGgCR,EAAKS,qJAGjCR,EAAU,GAAGW,4OAKbX,EAAU,GAAGW,4OAKbX,EAAU,GAAGW,oOASxCT,EAASU,WAAaF,EACtBR,EAASW,iBACP,QACAC,EAAWC,KAAK,CACdC,KAAMd,EACNe,GAAIlB,EAAKmB,OAGbjB,EAAkBkB,OAAOjB,E,CAiD3B,SAASY,EAAWM,IAEhBA,EAAMC,OAAO1B,UAAU2B,SAAS,eAChCF,EAAMC,OAAO1B,UAAU2B,SAAS,0BAEhC,EAAAjC,EAAAkC,mBAAkBC,KAAKP,IACvBO,KAAKR,KAAKnB,UAGZX,G,CA3IFA,IAsG4BuC,iBACAjC,SAASC,cAAc,2BAC/BmB,UAAY,GAC9B,MAAMc,EAAM,GACZ,IAAK,IAAIC,EAAI,EAAGA,EAAI1C,EAAaS,OAAQiC,IAAK,CAC5C,MAAMC,QAAY,EAAA7C,EAAA8C,aAAY5C,EAAa0C,IACvCC,GACFF,EAAII,KAAKF,EAAIG,K,CAIjBC,QAAQC,IAAIP,GAEZA,EAAIQ,SAAQnC,IACVD,EAAmBC,EAAK,G,CAY5BoC","sources":["src/components/shoplist.js"],"sourcesContent":["import { getBookById } from '../api';\nimport { deleteFromStorage, getStoredItems } from './localStorageApi';\n\n// Отримання даних з localStorage\nlet shoppingList = [];\nfunction init() {\n  const windowHeight = window.innerWidth;\n  const perPage = windowHeight >= 768 ? 3 : 4;\n\n  shoppingList = getStoredItems() || [];\n  const placeHolder = document.querySelector('.shopping-empty-container');\n\n  if (shoppingList.length !== 0) {\n    placeHolder.classList.add('visually-hidden');\n  } else {\n    placeHolder.classList.remove('visually-hidden');\n  }\n}\n\ninit();\n\n// Функція для створення карточки з даними\nfunction createShoppingCard(book) {\n  const { buy_links } = book;\n  const cardListContainer = document.querySelector('.shopping-list-cardlist');\n  const listItem = document.createElement('li');\n  listItem.classList.add('shopping-list-card');\n  const cardHTMLOld = `\n      <img class=\"shopping-list-cardlogo\" src=\"${\n        book.book_image\n      }\" alt=\"book-logo\" />\n      <div class=\"shopping-list-fullinfo\">\n        <div class=\"shopping-list-cardheader\">\n          <div class=\"cardheader-titlecontainer\">\n            <h3 class=\"shopping-list-cardtitle\">${book.title}</h3>\n            <h4 class=\"shopping-list-cardcategory\">${book.list_name}</h4>\n          </div>\n          <button class=\"deletecard\">Х</button>\n        </div>\n        <p class=\"shopping-list-carddescription\">${book.description}</p>\n        <div class=\"shopping-list-cardfooter\">\n          <h4 class=\"shopping-list-cardauthor\">${book.author}</h4>\n          <ul class=\"shopping-list-shops\">\n            ${generateShopLinks(book.shops)}\n          </ul>\n        </div>\n      </div>\n  `;\n\n  const cardHTML = `\n  <img\n                class=\"shopping-list-cardlogo\"\n                src=\"${book.book_image}\"\n                alt=\"book-logo\"\n              />\n              <div class=\"shopping-list-fullinfo\">\n                <div class=\"shopping-list-cardheaer\">\n                  <div class=\"cardheaer-tittlecontainer\">\n                    <h3 class=\"shopping-list-cardtitle\">${book.title}</h3>\n                    <h4 class=\"shopping-list-cardcategory\">\n                      ${book.list_name}\n                    </h4>\n                  </div>\n                  <button class=\"deletecard\">\n                  </button>\n                </div>\n                <p class=\"shopping-list-carddescription\">\n                  ${book.description}\n                </p>\n                <div class=\"shopping-list-cardfooter\">\n                  <h4 class=\"shopping-list-cardauthor\">${book.author}</h4>\n                  <ul class=\"shopping-list-shops\">\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[0].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon1\"></div>\n                  </a>\n                </li>\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[1].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon2\"></div>\n                  </a>\n                </li>\n                <li class=\"shopping-list-shopsitem\">\n                  <a href=\"${buy_links[4].url}\" class=\"shopping-list-shopslink\">\n                    <div class=\"shopping-list-shopsicon3\"></div>\n                  </a>\n                </li>\n                  </ul>\n                </div>\n              </div>\n  `;\n\n  listItem.innerHTML += cardHTML;\n  listItem.addEventListener(\n    'click',\n    deleteCard.bind({\n      card: listItem,\n      id: book._id,\n    })\n  );\n  cardListContainer.append(listItem);\n}\n\n// Функція для генерації посилань на магазини\nfunction generateShopLinks(shops) {\n  // return shops\n  //   .map(\n  //     shop => `\n  //   <li class=\"shopping-list-shopsitem\">\n  //     <a href=\"${shop.url}\" class=\"shopping-list-shopslink\">\n  //       <svg class=\"shopping-list-shopsicon\" width=\"16\" height=\"16\">\n  //         <use href=\"../images/sprite.svg#icon-burger\"></use>\n  //       </svg>\n  //     </a>\n  //   </li>\n  // `\n  //   )\n  //   .join('');\n}\n\n// Відображення карточок з даними з localStorage\nasync function displayShoppingCards() {\n  const cardListContainer = document.querySelector('.shopping-list-cardlist');\n  cardListContainer.innerHTML = '';\n  const arr = [];\n  for (let i = 0; i < shoppingList.length; i++) {\n    const res = await getBookById(shoppingList[i]);\n    if (res) {\n      arr.push(res.data);\n    }\n  }\n\n  console.log(arr);\n\n  arr.forEach(book => {\n    createShoppingCard(book);\n  });\n}\n\n// Оновлення даних в localStorage\nfunction updateLocalStorage() {\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n}\n\n// Приклад додавання книги до списку\n\n// updateLocalStorage();\ndisplayShoppingCards();\n\nfunction deleteCard(event) {\n  if (\n    event.target.classList.contains('deletecard') ||\n    event.target.classList.contains('shopping-list-icon')\n  ) {\n    deleteFromStorage(this.id);\n    this.card.remove();\n  }\n\n  init();\n}\n"],"names":["$3Z7eX","parcelRequire","$3be35a1ece96f753$var$shoppingList","$3be35a1ece96f753$var$init","window","innerWidth","$cR7As","getStoredItems","placeHolder","document","querySelector","length","classList","add","remove","$3be35a1ece96f753$var$createShoppingCard","book","buy_links","cardListContainer","listItem","createElement","book_image","title","list_name","description","author","shops","cardHTML","url","innerHTML","addEventListener","$3be35a1ece96f753$var$deleteCard","bind","card","id","_id","append","event","target","contains","deleteFromStorage","this","async","arr","i","res","getBookById","push","data","console","log","forEach","$3be35a1ece96f753$var$displayShoppingCards"],"version":3,"file":"shoplist.aae17196.js.map"}